@model IEnumerable<Gorjanc.Models.Vrh>;
@{
    ViewData["Title"] = "Domov";
}
<div class="text-center">
    <img src="~/favicon.ico" height="150vh">
    <h1>Gorjanc</h1>
    <h3>-</h3>
    <h3>digitalna planinska knjiga</h3>
    <br/>
    </br/>
    </br/>
    </br/>
    <h2>Izberi osvojen vrh:</h2>
    <div id="map"></div>
    <script>
    function mapa() {
        var vrhovi = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model, Newtonsoft.Json.Formatting.Indented));
        var map = L.map('map').setView([46.1722, 14.9881], 9);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        var markers = L.markerClusterGroup();
        for(x in vrhovi) {
            var niz = "<b><a href='https://localhost:5001/Vrhovi/Vrh/" + vrhovi[x]["VrhId"] + "' target='blank'>" + vrhovi[x]["Ime"] + "</a></b><br/>" + vrhovi[x]["Visina"] + "m";
            markers.addLayer(L.marker([vrhovi[x]["KoordinateS"], vrhovi[x]["KoordinateD"]]).bindPopup(niz));
        }
        map.addLayer(markers);
    }
    </script>
</div>